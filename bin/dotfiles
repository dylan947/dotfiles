#!/usr/bin/env bash
set -e

################################################################################
#
# Variables
#
################################################################################
DOTFILES_DIR=$(cd "$(dirname "$0")/.." && pwd)
DOTFILES=$(ls .)
TIMESTAMP=$(date +%s)
BACKUPS_DIR=$DOTFILES_DIR/$TIMESTAMP

################################################################################
#
# Functions
#
################################################################################
header() {
  echo -e "   |¯|        |¯|       /¯¯¯¯|   |¯|             "
  echo -e "   | |        | |      |  /¯¯ _  | |             "
  echo -e "   | |      __| |__  __| |__ ( ) | |             "
  echo -e "  _| |  __ (__   __)(__   __) ¯  | |  ___  /¯¯¯  "
  echo -e " /   | /  \   | |      | |   |¯| | | /   \ \___  "
  echo -e "|    ||    |  | |      | |   | | | ||¯¯¯¯      \ "
  echo -e " \__/  \__/   |_|      |_|   |_| |_| \___/  ___/ "
}

log(){
  echo -e "$1\n";
}

info() {
  log "\033[1;30m=> $@\033[0m";
}

success() {
  log "\033[0;32m=> $@\033[0m";
}

backup() {
  echo $DOTFILES
}

install() {
  header
  echo

  if [[ ! -d $DOTFILES_DIR ]]; then
    info "Installing dotfiles"
  else
    info "Updating dotfiles"
    info "Making backup at $BACKUPS_DIR"
    backup
  fi
}
################################################################################
#
# Install
#
################################################################################

install
